<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8"><title>Daftar eduLessonPRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Poppins', sans-serif; }</style>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md bg-white p-8 rounded-3xl shadow-xl">
        <h2 class="text-xl font-bold mb-4">Buat Akun Member (1 Tahun)</h2>
        <form onsubmit="handleRegister(event)" class="space-y-4">
            <input type="text" id="regNama" placeholder="Nama Lengkap" required class="w-full border p-3 rounded-xl outline-none text-sm">
            <input type="text" id="regUser" placeholder="Username" required class="w-full border p-3 rounded-xl outline-none text-sm">
            <input type="number" id="regWA" placeholder="Nomor WhatsApp" required class="w-full border p-3 rounded-xl outline-none text-sm">
            <input type="email" id="regEmail" placeholder="Email" required class="w-full border p-3 rounded-xl outline-none text-sm">
            
            <div class="relative">
                <input type="password" id="regPass" placeholder="Password (Besar, Kecil, Angka, Simbol)" required oninput="checkStrength()" class="w-full border p-3 rounded-xl outline-none text-sm">
                <button type="button" onclick="const p=document.getElementById('regPass'); p.type=p.type==='password'?'text':'password'" class="absolute right-3 top-3">üëÅÔ∏è</button>
            </div>
            
            <input type="password" id="regPassConfirm" placeholder="Konfirmasi Password" required class="w-full border p-3 rounded-xl outline-none text-sm">
            <p id="passHint" class="text-[9px] italic"></p>
            <button type="submit" id="btn" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold shadow-lg">Daftar Sekarang</button>
        </form>
    </div>

    <script>
        function checkStrength() {
            const pass = document.getElementById('regPass').value;
            const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
            const hint = document.getElementById('passHint');
            hint.innerText = regex.test(pass) ? "‚úÖ Password Kuat" : "‚ùå Wajib: Huruf Besar, Kecil, Angka, & Simbol";
            hint.style.color = regex.test(pass) ? "green" : "red";
        }

        async function handleRegister(e) {
            e.preventDefault();
            const pass = document.getElementById('regPass').value;
            if (pass !== document.getElementById('regPassConfirm').value) return alert("Password tidak cocok!");
            
            const btn = document.getElementById('btn'); btn.innerText = "Memproses...";
            const rawWA = document.getElementById('regWA').value;
            const waLink = `https://wa.me/62${rawWA.replace(/^0+/, '').replace(/^62+/, '')}`;

            const data = { action: "register", nama: document.getElementById('regNama').value, username: document.getElementById('regUser').value, email: document.getElementById('regEmail').value, whatsapp: waLink, pass: pass };
            const scriptURL = 'https://script.google.com/macros/s/AKfycbzv4azWHXvtaX3n1fobQZr8WGzYQ_RhuP8Wda_wxavJ1uOafsKm267E3t-NPZ1E5G_j/exec';
            
            try {
                await fetch(scriptURL, { method: 'POST', body: JSON.stringify(data) });
                localStorage.setItem('userAccount', JSON.stringify({...data, isPaid: false, privilege: 'User'}));
                alert("Berhasil! Silakan lanjut ke pembayaran.");
                window.location.href = "payment.html";
            } catch (e) { alert("Sistem Error!"); btn.innerText = "Daftar Sekarang"; }
        }
    </script>
</body>
</html>